(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(46)},21:function(e,t,a){},23:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(14),o=a.n(s),i=(a(21),a(2)),c=a(3),p=a(5),u=a(4),l=a(6),h=(a(23),function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,"Powered By Kirkiki and Noki !")}}]),t}(n.Component)),f=a(15),d=a.n(f),m=function(){function e(t){Object(i.a)(this,e),this.APIKey="",this.supported_attributes=["age","gender","headPose","smile","facialHair","glasses","emotion","hair","makeup","occlusion","accessories","blur","exposure","noise"],this.APIKey=t}return Object(c.a)(e,[{key:"getSupportedAttributes",value:function(){return this.supported_attributes}},{key:"formatAPIUrl",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="https://westeurope.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceIds="+e+"&returnFaceLandmarks="+t,r="";for(var s in a)this.supported_attributes.includes(s)?(r||(r+=","),r+=s):console.log("attribute :",s,"is not supported");return r&&(n=n+"&returnFaceAttributes="+r),n}},{key:"GetFaceInformationFromImageData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.supported_attributes,this.formatAPIUrl(t,a,this.supported_attributes));return this._MakeRequest(n,e,"application/octet-stream")}},{key:"GetFaceInformationFromUrl",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.supported_attributes,this.formatAPIUrl(t,a,this.supported_attributes));return this._MakeRequest(n,{url:e},"application/json")}},{key:"_MakeRequest",value:function(e,t,a){return d.a.post(e,t,{headers:{"Ocp-Apim-Subscription-Key":this.APIKey,"Content-type":a}})}}]),e}(),k=(a(44),function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"createRect",value:function(e,t,a,n,r){console.log("Create rect :",t,a,n,r),e.moveTo(t,a),e.lineTo(t+n,a),e.lineTo(t+n,a+r),e.lineTo(t,a+r),e.lineTo(t,a),e.strokeStyle="#FF0000",e.stroke()}},{key:"createEye",value:function(e,t,a,n,r){}},{key:"createNose",value:function(){}},{key:"createLip",value:function(){}},{key:"createPoint",value:function(e,t){e.beginPath(),e.strokeStyle="#FF0000",e.arc(t.x,t.y,1,0,2*Math.PI,!0),e.stroke()}},{key:"createLine",value:function(e,t,a){console.log("Draw line ",t,a),e.beginPath(),e.strokeStyle="#00FF00",e.moveTo(t.x,t.y),e.lineTo(a.x,a.y),e.stroke()}},{key:"updateCanvas",value:function(){console.log("Canvas update !");var e=this.refs.faceCanvas.getContext("2d");e.clearRect(0,0,this.refs.faceCanvas.width,this.refs.faceCanvas.height),e.beginPath(),console.log(this.props.faceRect),console.log(this.props.faceLandmarks),this.props.faceRect&&this.createRect(e,this.props.faceRect.left,this.props.faceRect.top,this.props.faceRect.width,this.props.faceRect.height),this.props.faceLandmarks&&this.props.faceLandmarks.eyeLeftBottom&&this.createEye(e,this.props.faceLandmarks.eyeLeftBottom,this.props.faceLandmarks.eyeLeftInner,this.props.faceLandmarks.eyeLeftOuter,this.props.faceLandmarks.eyeLeftTop),this.props.faceLandmarks&&this.props.faceLandmarks.eyeRightBottom&&this.createEye(e,this.props.faceLandmarks.eyeRightBottom,this.props.faceLandmarks.eyeRightInner,this.props.faceLandmarks.eyeRightOuter,this.props.faceLandmarks.eyeRightTop),this.props.faceLandmarks&&this.props.faceLandmarks.eyebrowLeftInner&&this.createLine(e,this.props.faceLandmarks.eyebrowLeftInner,this.props.faceLandmarks.eyebrowLeftOuter),this.props.faceLandmarks&&this.props.faceLandmarks.eyebrowRightInner&&this.createLine(e,this.props.faceLandmarks.eyebrowRightInner,this.props.faceLandmarks.eyebrowRightOuter),this.props.faceLandmarks&&this.props.faceLandmarks.mouthLeft&&this.createLine(e,this.props.faceLandmarks.mouthLeft,this.props.faceLandmarks.mouthRight),this.props.faceLandmarks&&this.props.faceLandmarks.noseRootLeft&&this.createNose(this.props.faceLandmarks.noseRootLeft,this.props.faceLandmarks.noseRootRight,this.props.faceLandmarks.noseLeftAlarOutTip,this.props.faceLandmarks.noseLeftAlarTop,this.props.faceLandmarks.noseRightAlarOutTip,this.props.faceLandmarks.noseRightAlarTop,this.props.faceLandmarks.noseTip),this.props.faceLandmarks&&this.props.faceLandmarks.pupilLeft&&this.createPoint(e,this.props.faceLandmarks.pupilLeft),this.props.faceLandmarks&&this.props.faceLandmarks.pupilRight&&this.createPoint(e,this.props.faceLandmarks.pupilRight),this.props.faceLandmarks&&this.props.faceLandmarks.upperLipTop&&this.createLip(this.props.faceLandmarks.upperLipTop,this.props.faceLandmarks.upperLipBottom,this.props.faceLandmarks.underLipBottom,this.props.faceLandmarks.underLipBottom)}},{key:"componentWillUpdate",value:function(){console.log("Update !"),this.updateCanvas()}},{key:"componentWillReceiveProps",value:function(e){this.props=e,console.log("New Props ",e),this.forceUpdate()}},{key:"render",value:function(){return r.a.createElement("div",{id:"container"},r.a.createElement("img",{id:"preview_img",src:this.props.image.url,alt:"preview"}),r.a.createElement("canvas",{id:"faceCanvas",ref:"faceCanvas",width:this.props.image.width,height:this.props.image.height}))}}]),t}(n.Component)),g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).faceRecog=new m("59367a363a2947208054fa85fc318ce9"),a.state={inputValue:"",imageData:{width:0,height:0,url:""},faceRect:{},faceLandmarks:{}},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"updateInputValue",value:function(e){this.setState({inputValue:e.target.value})}},{key:"updatePreview",value:function(e){var t=this;e.onload=function(){t.setState({imageData:{width:e.width,height:e.height,url:e.src}})}}},{key:"handleResponse",value:function(e){this.setState({faceRect:e.data[0].faceRectangle,faceLandmarks:e.data[0].faceLandmarks})}},{key:"uploadUrlImage",value:function(){var e=this,t=new Image;t.src=this.state.inputValue,this.updatePreview(t),this.faceRecog.GetFaceInformationFromUrl(this.state.inputValue).then(function(t){return e.handleResponse(t)}).catch(function(e){console.log(e)})}},{key:"uploadImage",value:function(e){var t=this,a=e.target.files,n=new FileReader;if(n&&a&&a.length){n.readAsArrayBuffer(a[0]),n.onload=function(){var e=n.result;t.faceRecog.GetFaceInformationFromImageData(e).then(function(e){return t.handleResponse(e)}).catch(function(e){console.log(e)})};var r=new FileReader;r.onload=function(e){var a=new Image;a.src=e.target.result,t.updatePreview(a)},r.readAsDataURL(a[0])}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",null,"Upload through Link"),r.a.createElement("div",null,r.a.createElement("input",{id:"urlImput",value:this.state.inputValue,onChange:function(t){return e.updateInputValue(t)},placeholder:"http://your_link/to/an/image.ext"})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(t){return e.uploadUrlImage()}},"Submit"))),"OR",r.a.createElement("div",null,r.a.createElement("label",null,"Take a picture of your face"),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"mypic",accept:"image/*",capture:"camera",onChange:function(t){return e.uploadImage(t)}})))),r.a.createElement(k,{faceLandmarks:this.state.faceLandmarks,faceRect:this.state.faceRect,image:this.state.imageData}))}}]),t}(n.Component),L=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"An Awesome RGPD Compliant tool, we promise we don't keeps your personal data !",r.a.createElement(g,null)),r.a.createElement(h,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,2,1]]]);
//# sourceMappingURL=main.e9db6e69.chunk.js.map